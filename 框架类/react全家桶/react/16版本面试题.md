### fiber

#### 为什么需要fiber？
- 我们所看到的页面是一帧一帧绘制出来的，普通设备屏幕的刷新频率是每秒 60次，也就是说当每秒绘制的帧数大于等于60时，页面是流畅的，否则将会感觉到卡顿。按照一秒60帧计算的话，那绘制一帧大约需要16ms左右。如果我们js代码执行时间过长又因为js引擎线程和页面渲染引擎是互斥的，那将会阻塞页面的渲染，使用户感觉到卡顿。
- 一帧中浏览器具体都做了哪些事情？
  - 首先是处理用户输入事件，让用户能够及时得到反馈。
  - 处理定时器，检查哪些定时器已经到时，然后执行这些定时器的回调。
  - 接下来处理 Begin Frame（开始帧），即每一帧的事件，包括 window.resize、scroll、media query change 等。
  - 处理动画帧requestAnimationFrame
  - 重排（layout）
  - 绘制（paint）
  - 最后才处于空闲时间。
- react页面初次渲染以及更新时，是从根节点开始用深度优先遍历的算法进行递归遍历子节点的，期间不能中断，这样会造成执行栈比较深，而且如果项目很庞大的话，就容易造成js引擎线程一直占用着浏览器资源导致页面渲染引擎处于阻塞状态而出现卡顿现象。
